import{D as x,_ as y,r as u,i as f,u as g,c as S,a as s,t as v,j as p,k as d,l as m,m as k,b as A,n as C,F as D,e as M,q as B,o as w,p as I,h as N,s as V}from"./index.0c486574.js";import{A as E,_ as H}from"./Footer.477e470f.js";const n=new x("PowerManagementSystem");n.version(1).stores({admins:"++id, name, username, password, is_super_admin",users:"++id, name,amps",invoices:"++id, user_id, date,price"});const j=async()=>{try{const t=await n.admins.count(),c=await n.users.count(),i=await n.users.toArray(),r=new Map(i.map(o=>[o.id,o.amps])),h=(await n.invoices.toArray()).reduce((o,l)=>{const a=r.get(l.user_id)||0;return o+l.price*a},0);return{admins:t,users:c,price:h}}catch(t){return console.error("Error fetching dashboard stats:",t),{admins:0,users:0,price:0}}};const e=t=>(I("data-v-79d45c22"),t=t(),N(),t),F={class:"h-100 has-header has-footer"},P={class:"main-container container",style:{"min-height":"184px"}},$={class:"row"},q={class:"col-12"},R=e(()=>s("h1",{class:"text-center text-3xl mb-1"},"\u0645\u06C6\u0644\u06CC\u062F\u06D5\u06CC \u062E\u06D5\u0644\u06D5\u06A9\u0627\u0646",-1)),T={class:"row"},z={class:"container my-5"},G={class:"row justify-content-center"},J={class:"col-md-6"},K={class:"gradient-card py-5"},L=e(()=>s("h1",{class:"text-center text-3xl mb-4"},"\u0626\u0627\u0645\u0627\u0631\u06D5\u06A9\u0627\u0646",-1)),O={class:"row"},Q=e(()=>s("h3",{class:"col-6 mt-2"},"\u06A9\u06C6\u06CC \u062F\u0627\u0647\u0627\u062A\u06CC \u0645\u0627\u0646\u06AF:",-1)),U={class:"col-6 bg-success py-2 text-center",style:{"border-radius":"10px"}},W={class:"row mt-2"},X=e(()=>s("h3",{class:"col-6 mt-2"},"\u06A9\u06C6\u06CC \u0628\u06D5\u0698\u062F\u0627\u0631\u0628\u0648\u0627\u0646:",-1)),Y={class:"col-6 bg-info py-2 text-center",style:{"border-radius":"10px"}},Z={class:"row mt-2"},ss=e(()=>s("h3",{class:"col-6 mt-2"},"\u06A9\u06C6\u06CC \u0628\u06D5\u06A9\u0627\u0631\u0647\u06CE\u0646\u06D5\u0631:",-1)),es={class:"col-6 bg-dark py-2 text-white text-center",style:{"border-radius":"10px"}},ts={class:"container px-0",style:{"margin-bottom":"100px"}},as={class:"swiper-wrapper",id:"swiper-wrapper-136d4dad92255549","aria-live":"polite",style:{"transition-duration":"0ms",transform:"translate3d(0px, 0px, 0px)"}},os=e(()=>s("div",{class:"text-center",role:"group","aria-label":"1 / 10"},[s("div",{class:"card shadow-sm mb-2"},[s("div",{class:"card-body"},[s("div",{class:"h2 mb-0"},[s("i",{class:"bi bi-house"})]),s("p",{class:"small"},"\u0645\u0627\u06B5\u06D5\u0648\u06D5")])])],-1)),cs=e(()=>s("div",{class:"swiper-slide text-center swiper-slide-next",role:"group","aria-label":"2 / 10"},[s("div",{class:"card shadow-sm mb-2"},[s("div",{class:"card-body"},[s("div",{class:"h2 mb-0"},[s("i",{class:"bi bi-person"})]),s("p",{class:"small"},"\u0626\u06D5\u062F\u0645\u06CC\u0646\u06D5\u06A9\u0627\u0646")])])],-1)),is=e(()=>s("div",{class:"swiper-slide text-center",role:"group","aria-label":"3 / 10"},[s("div",{class:"card shadow-sm mb-2"},[s("div",{class:"card-body"},[s("div",{class:"h2 mb-0"},[s("i",{class:"bi bi-people"})]),s("p",{class:"small"},"\u0628\u06D5\u0698\u062F\u0627\u0631\u0628\u0648\u0627\u0646")])])],-1)),rs=e(()=>s("div",{class:"swiper-slide text-center",role:"group","aria-label":"4 / 10"},[s("div",{class:"card shadow-sm mb-2"},[s("div",{class:"card-body"},[s("div",{class:"h2 mb-0"},[s("i",{class:"bi bi-pen"})]),s("p",{class:"small"},"\u067E\u0633\u0648\u06B5\u06D5\u06A9\u0627\u0646")])])],-1)),ds=V('<div class="card shadow-sm mb-2" data-v-79d45c22><div class="card-body" data-v-79d45c22><div class="h2 mb-0" data-v-79d45c22><i class="bi bi-box-arrow-left" data-v-79d45c22></i></div><p class="small" data-v-79d45c22>\u0686\u0648\u0648\u0646\u06D5 \u062F\u06D5\u0631\u06D5\u0648\u06D5</p></div></div>',1),ns=[ds],ls=e(()=>s("span",{class:"swiper-notification","aria-live":"assertive","aria-atomic":"true"},null,-1)),_s={__name:"Home",setup(t){let c=u(0),i=u(0),r=u(0);const b=async()=>{try{const a=await j();c.value=a.admins||0,i.value=a.users||0,r.value=a.price||0,console.log("Dashboard Stats:",c.value,i.value,r.value)}catch(a){console.error("Error fetching dashboard stats:",a)}};f(()=>{b()});const h=M(),o=g(),l=()=>{o.logout(),h.push("/")};return(a,ps)=>{const _=B("router-link");return w(),S(D,null,[s("main",F,[s("div",P,[s("div",$,[s("div",q,[R,s("div",T,[s("div",z,[s("div",G,[s("div",J,[s("div",K,[L,s("div",O,[Q,s("p",U,v(p(r))+" \u062F.\u0639 ",1)]),s("div",W,[X,s("p",Y,v(p(i)),1)]),s("div",Z,[ss,s("p",es,v(p(c)),1)])])])])]),s("div",ts,[s("div",as,[d(_,{to:{name:"dashboard"}},{default:m(()=>[os]),_:1}),p(o).admin.is_super_admin==="super_admin"?(w(),k(_,{key:0,to:{name:"admins"}},{default:m(()=>[cs]),_:1})):A("",!0),d(_,{to:{name:"users"}},{default:m(()=>[is]),_:1}),d(_,{to:{name:"invoices"}},{default:m(()=>[rs]),_:1}),s("div",{class:"swiper-slide text-center",role:"group","aria-label":"4 / 10",onClick:C(l,["prevent"])},ns)]),ls])])])])])]),d(E),d(H)],64)}}},us=y(_s,[["__scopeId","data-v-79d45c22"]]);export{us as default};
